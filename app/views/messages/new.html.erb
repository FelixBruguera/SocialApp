<%= turbo_frame_tag id='new_message' do %>
    <%= form_with model: @message, id: 'message-form', data: {'messages-target': 'form'} do |f| %>
        <%= f.text_field :body, placeholder: 'Say something', required: true, id: 'message-input', 'data-action':'click->messages#markAsRead'%>
        <%= f.hidden_field :chat_id, :value => params[:chat_id] %>
        <%= f.hidden_field :user_id, :value => current_user.slug %>
        <%= f.submit 'Send', id: 'chat-button', class: 'button is-link', data: {"action": "click-> messages#scroll"}%>
    <% end %>
    <script defer>
    const submitButton = document.querySelector("form")
    console.log(submitButton)
    submitButton.addEventListener("submit", function() {
        //const messages = document.querySelector("div[id*='messages_']")
        //messages.scrollTo(0, messages.scrollHeight)
        console.log(messages.scrollHeight)
        console.log(messages.scrollTop)
    })
</script>
<% end %>